hspeed = median(hspeed, MAX_HSPEED, -MAX_HSPEED);
vspeed = min(vspeed, MAX_VSPEED);
step_count += 1;